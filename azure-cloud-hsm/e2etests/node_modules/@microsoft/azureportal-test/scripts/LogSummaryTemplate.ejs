<style>
    .md-log {
        box-sizing: content-box;
        display: flex;
        flex-direction: column;
        font-family:"Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        white-space: pre-wrap;
        width: auto;
    }

    .md-log h3 {
        color: rgb(170, 170, 170);
    }

    .md-log h4 {
        color: rgb(127, 127, 127);
    }

    .md-log .section {
        margin: 1em .5em;
        min-width: 500px;
    }

    .md-log .flex-container {
        border-collapse: collapse;
        display: flex;
    }

    .md-log .metadata-block {
        border: 1px;
        border-radius: .3em;
        border-style: inset;
    }

    .md-log .metadata-entry {
        border: 1px;
        border-style: inset;
        word-break: break-word;
    }

    .md-log .metadata-key {
        padding: .4em;
        width: 20%;
    }

    .md-log .metadata-value {
        padding: .4em;
        width: 80%;
    }

    .md-log .error-block {
        background-color: #000;
        border: 2px;
        border-radius: .3em;
        border-style: inset;
        color: red;
        font-size: .9em;
        height: 200px;
        overflow-y: auto;
        padding: .4em .7em;
    }

    .md-log .error-message {
        line-height: 1.5em;
        word-break: break-word;
    }

    .md-log .log-block {
        border: 2px;
        border-radius: .3em;
        border-style: inset;
        height: 700px;
        overflow-y: auto;
        padding: .4em;
    }

    .md-log .log-entry {
        padding: .2em 0em;
    }

    .md-log .timestamp {
        color: grey;
        font-size: .7em;
        min-width: 12em;
    }

    .md-log .log-message {
        font-size: 0.8em;
        overflow-y: auto;
        word-break: break-word;
    }
</style>

<div class="md-log">
    <h3>Logs</h3>

    <% if (metadata) {%>
    <div class="section">
        <h4>Test Case Details</h4>
        <div class="metadata-block">
            <% for (let [k, v] of Object.entries(metadata)) { %>
            <div class="flex-container">
                <div class="metadata-entry metadata-key"><%= k.charAt(0).toUpperCase() + k.slice(1).replace(/([a-z0-9])([A-Z])/g, '$1 $2') %></div>
                <div class="metadata-entry metadata-value"><%= v %></div>
            </div>
            <% } %>
        </div>
    </div>
    <% }%>

    <% if (error) {%>
    <div class="section">
        <h4>Error Message</h4>
        <div class="error-block">
            <% [...error.split("\n")].forEach((line)=>{ %>
            <div class="error-message"><%= line.replace(/ /g, "&thinsp;") %></div>
            <% }) %>
        </div>
    </div>
    <% } %>

    <div class="section">
        <h4>Test Case Output</h4>
        <div class="log-block">
            <% logs.forEach((log,index)=>{ %>
            <div class="log-entry flex-container" style="<%=  index % 2 == 1 ? 'background-color:rgba(127, 127, 127, 0.150); ' : '' %>">
                <div class="timestamp"> <%= log.timestamp %></div>
                <div class="log-message" style="<%=  log.message.toLowerCase().includes('testfx:warning') ? 'color:red; ' : '' %>">
                    <% [...log.message.split("\n")].forEach((line)=>{ %>
                    <div><%= line.replace(/ /g, "&thinsp;") %></div>
                    <% }) %>
                </div>
            </div>
            <% }) %>
        </div>
    </div>
</div>
